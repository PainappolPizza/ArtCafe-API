// database
datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

// generator
generator client {
    provider             = "prisma-client-py"
    recursive_type_depth = 5
}

// enums
enum Role {
    User
    Creator
    Admin
}

enum Importance {
    High
    Medium
    Low
}

// data models
model User {
    id         String    @id @default(uuid())
    email      String
    name       String
    role       Role
    score      Int       @default(0)
    places     Place[]
    Object3D   Object3D? @relation(fields: [object3DId], references: [id])
    object3DId String?
    createdAt  DateTime  @default(now())
}

model Place {
    id          String     @id @default(uuid())
    name        String
    city        String
    country     String
    geolocation String
    importance  Importance
    story       String
    uri         String
    User        User?      @relation(fields: [userId], references: [id])
    userId      String?
    Object3D    Object3D[]
    createdAt   DateTime   @default(now())
}

model Object3D {
    id        String   @id @default(uuid())
    location  Place    @relation(fields: [placeId], references: [id])
    placeId   String
    found_by  User[]
    data      Bytes
    createdAt DateTime @default(now())
}
